/*! dynamics-web-api-callbacks v1.2.1 (c) 2017 Aleksandr Rogov */
!function(e,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?exports.DynamicsWebApi=a():e.DynamicsWebApi=a()}(this,function(){return function(e){function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}var t={};return a.m=e,a.c=t,a.i=function(e){return e},a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},a.p="",a(a.s=12)}([function(e,a){var t={Types:{ResponseBase:function(){this.oDataContext=""},Response:function(){t.Types.ResponseBase.call(this),this.value={}},ReferenceResponse:function(){t.Types.ResponseBase.call(this),this.id="",this.collection=""},MultipleResponse:function(){t.Types.ResponseBase.call(this),this.oDataNextLink="",this.oDataCount=0,this.value=[]},FetchXmlResponse:function(){t.Types.ResponseBase.call(this),this.value=[],this.PagingInfo={cookie:"",page:0,nextPage:1}}},Prefer:{ReturnRepresentation:"return=representation",Annotations:{AssociatedNavigationProperty:"Microsoft.Dynamics.CRM.associatednavigationproperty",LookupLogicalName:"Microsoft.Dynamics.CRM.lookuplogicalname",All:"*",FormattedValue:"OData.Community.Display.V1.FormattedValue",FetchXmlPagingCookie:"Microsoft.Dynamics.CRM.fetchxmlpagingcookie"}}};e.exports=t},function(e,a){function t(e,a,t){throw new Error(t?e+" requires the "+a+" parameter to be of type "+t:e+" requires the "+a+" parameter.")}var r={handleErrorResponse:function(e){throw new Error("Error: "+e.status+": "+e.message)},parameterCheck:function(e,a,r,n){void 0!==e&&null!==e&&""!=e||t(a,r,n)},stringParameterCheck:function(e,a,r){"string"!=typeof e&&t(a,r,"String")},arrayParameterCheck:function(e,a,r){e.constructor!==Array&&t(a,r,"Array")},stringOrArrayParameterCheck:function(e,a,r){e.constructor!==Array&&"string"!=typeof e&&t(a,r,"String or Array")},numberParameterCheck:function(e,a,r){if("number"!=typeof e){if("string"==typeof e&&e&&!isNaN(parseInt(e)))return;t(a,r,"Number")}},boolParameterCheck:function(e,a,r){"boolean"!=typeof e&&t(a,r,"Boolean")},guidParameterCheck:function(e,a,r){try{return/[0-9A-F]{8}[-]?([0-9A-F]{4}[-]?){3}[0-9A-F]{12}/i.exec(e)[0]}catch(e){t(a,r,"GUID String")}},callbackParameterCheck:function(e,a,r){"function"!=typeof e&&t(a,r,"Function")}};e.exports=r},function(e,a){String.prototype.endsWith=function(e,a){var t=this.toString();("number"!=typeof a||!isFinite(a)||Math.floor(a)!==a||a>t.length)&&(a=t.length),a-=e.length;var r=t.lastIndexOf(e,a);return r!==-1&&r===a},String.prototype.startsWith=function(e,a){return a=a||0,this.substr(a,e.length)===e}},function(e,a,t){var r=t(0);e.exports=function(e,a,n,i,c,s,o){n.impersonate&&(!c||c&&!c.MSCRMCallerID)&&(c||(c={}),c.MSCRMCallerID=n.impersonate),(!c||c&&!c.Prefer)&&(c||(c={}),n.maxPageSize&&n.maxPageSize>0&&(c.Prefer="odata.maxpagesize="+n.maxPageSize),n.returnRepresentation&&!c.hasOwnProperty("Prefer")&&(c.Prefer=r.Prefer.ReturnRepresentation),n.includeAnnotations&&(c.Prefer='odata.include-annotations="'+n.includeAnnotations+'"'),c.hasOwnProperty("Prefer")&&!c.Prefer&&delete c.Prefer);var l;i&&(l=JSON.stringify(i,function(e,a){return e.endsWith("@odata.bind")&&"string"==typeof a&&!a.startsWith(n.webApiUrl)&&(a=n.webApiUrl+a),a}));var u;"undefined"!=typeof XMLHttpRequest&&(u=t(8));var p=function(t){t&&(c||(c={}),c.Authorization="Bearer: "+t),u(e,n.webApiUrl+a,l,c,s,o)};n.onTokenRefresh&&(!c||c&&!c.Authorization)?n.onTokenRefresh(p):p()}},function(e,a,t){function r(e,a,t,n){var s={},o=[];if(n=null!=n?n:"&",e){if(e.navigationProperty&&(c.stringParameterCheck(e.navigationProperty,"DynamicsWebApi."+a,"request.navigationProperty"),t+="/"+e.navigationProperty),null!=e.select&&e.select.length&&(c.arrayParameterCheck(e.select,"DynamicsWebApi."+a,"request.select"),"retrieve"==a&&1==e.select.length&&e.select[0].endsWith("/$ref")?t+="/"+e.select[0]:(e.select[0].startsWith("/")&&"retrieve"==a&&(null==e.navigationProperty?t+=e.select.shift():e.select.shift()),e.select.length&&o.push("$select="+e.select.join(",")))),e.filter&&(c.stringParameterCheck(e.filter,"DynamicsWebApi."+a,"request.filter"),o.push("$filter="+e.filter)),e.savedQuery&&o.push("savedQuery="+c.guidParameterCheck(e.savedQuery,"DynamicsWebApi."+a,"request.savedQuery")),e.userQuery&&o.push("userQuery="+c.guidParameterCheck(e.userQuery,"DynamicsWebApi."+a,"request.userQuery")),e.maxPageSize&&e.maxPageSize>0&&(c.numberParameterCheck(e.maxPageSize,"DynamicsWebApi."+a,"request.maxPageSize"),s.Prefer="odata.maxpagesize="+e.maxPageSize),e.count&&(c.boolParameterCheck(e.count,"DynamicsWebApi."+a,"request.count"),o.push("$count="+e.count)),e.top&&e.top>0&&(c.numberParameterCheck(e.top,"DynamicsWebApi."+a,"request.top"),o.push("$top="+e.top)),null!=e.orderBy&&e.orderBy.length&&(c.arrayParameterCheck(e.orderBy,"DynamicsWebApi."+a,"request.orderBy"),o.push("$orderby="+e.orderBy.join(","))),null!=e.returnRepresentation&&(c.boolParameterCheck(e.returnRepresentation,"DynamicsWebApi."+a,"request.returnRepresentation"),s.Prefer=e.returnRepresentation?i.Prefer.ReturnRepresentation:""),e.includeAnnotations&&(c.stringParameterCheck(e.includeAnnotations,"DynamicsWebApi."+a,"request.includeAnnotations"),s.Prefer='odata.include-annotations="'+e.includeAnnotations+'"'),null!=e.ifmatch&&null!=e.ifnonematch)throw new Error("DynamicsWebApi."+a+". Either one of request.ifmatch or request.ifnonematch parameters should be used in a call, not both.");if(e.ifmatch&&(c.stringParameterCheck(e.ifmatch,"DynamicsWebApi."+a,"request.ifmatch"),s["If-Match"]=e.ifmatch),e.ifnonematch&&(c.stringParameterCheck(e.ifnonematch,"DynamicsWebApi."+a,"request.ifnonematch"),s["If-None-Match"]=e.ifnonematch),e.impersonate&&(c.stringParameterCheck(e.impersonate,"DynamicsWebApi."+a,"request.impersonate"),s.MSCRMCallerID=c.guidParameterCheck(e.impersonate,"DynamicsWebApi."+a,"request.impersonate")),e.token&&(c.stringParameterCheck(e.token,"DynamicsWebApi."+a,"request.token"),s.Authorization="Bearer: "+e.token),null!=e.expand&&e.expand.length){c.arrayParameterCheck(e.expand,"DynamicsWebApi."+a,"request.expand");for(var l=[],u=0;u<e.expand.length;u++)if(e.expand[u].property){var p=r(e.expand[u],a+" $expand",null,";"),m=p.query;m&&m.length&&(m="("+m+")"),l.push(e.expand[u].property+m)}l.length&&o.push("$expand="+encodeURI(l.join(",")))}}return{url:t,query:o.join(n),headers:s}}function n(e,a){e.collection?c.stringParameterCheck(e.collection,"DynamicsWebApi."+a,"request.collection"):c.parameterCheck(e.collection,"DynamicsWebApi."+a,"request.collection");var t=e.collection.toLowerCase();e.id&&(e.id=c.guidParameterCheck(e.id,"DynamicsWebApi."+a,"request.id"),t+="("+e.id+")");var n=r(e,a,t);return n.query&&(n.url+="?"+encodeURI(n.query)),{url:n.url,headers:n.headers}}var i=t(0),c=t(1),s={convertRequestOptions:r,convertRequest:n};e.exports=s},function(e,a,t){var r={buildFunctionParameters:t(9),getFetchXmlPagingCookie:t(11),convertToReferenceObject:t(10)};e.exports=r},function(e,a){e.exports=function(e,a){return"string"==typeof a&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.exec(a)?new Date(a):a}},function(e,a){e.exports=function(e){var a={};if(!e)return a;for(var t=e.split("\r\n"),r=0,n=t.length;r<n;r++){var i=t[r],c=i.indexOf(": ");c>0&&(a[i.substring(0,c)]=i.substring(c+2))}return a}},function(e,a,t){var r=t(6),n=t(7),i=function(e,a,t,i,c,s){var o=new XMLHttpRequest;if(o.open(e,a,!0),o.setRequestHeader("OData-MaxVersion","4.0"),o.setRequestHeader("OData-Version","4.0"),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Content-Type","application/json; charset=utf-8"),null!=i)for(var l in i)o.setRequestHeader(l,i[l]);o.onreadystatechange=function(){if(4===o.readyState){switch(o.status){case 200:case 201:case 204:case 304:var e=null;o.responseText&&(e=JSON.parse(o.responseText,r));c({data:e,headers:n(o.getAllResponseHeaders()),status:o.status});break;default:var a;try{a=JSON.parse(o.response).error}catch(e){a=new Error("Unexpected Error")}a.status=o.status,s(a)}o=null}},o.onerror=function(){s({message:"Network Error"}),o=null},o.ontimeout=function(e){s({message:"Request Timed Out"}),o=null},t?o.send(t):o.send()};e.exports=i},function(e,a){e.exports=function(e){if(e){for(var a=Object.keys(e),t="",r="",n=1;n<=a.length;n++){var i=a[n-1],c=e[i];n>1&&(t+=",",r+="&"),t+=i+"=@p"+n,r+="@p"+n+"="+("string"==typeof c?"'"+c+"'":c)}return"("+t+")?"+r}return"()"}},function(e,a){e.exports=function(e){var a=/\/(\w+)\(([0-9A-F]{8}[-]?([0-9A-F]{4}[-]?){3}[0-9A-F]{12})/i.exec(e["@odata.id"]);return{id:a[2],collection:a[1],oDataContext:e["@odata.context"]}}},function(e,a){e.exports=function(e,a){e=e?e:"",a=a?a:1,e=unescape(unescape(e));var t=/pagingcookie="(<cookie page="(\d+)".+<\/cookie>)/.exec(e);if(null!=t){var r=parseInt(t[2]);return{cookie:t[1].replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"'").replace(/\'/g,"&quot;"),page:r,nextPage:r+1}}return{cookie:"",page:a,nextPage:a+1}}},function(e,a,t){function r(e){var a={webApiVersion:"8.0",webApiUrl:"",impersonate:null,onTokenRefresh:null,includeAnnotations:null,maxPageSize:null,returnRepresentation:null};e||(e=a);var s=function(){if("undefined"!=typeof GetGlobalContext)return GetGlobalContext();if("undefined"!=typeof Xrm)return Xrm.Page.context;throw new Error("Xrm Context is not available.")},o=function(){var e=s();if(e){var a=e.getClientUrl();return a.match(/\/$/)&&(a=a.substring(0,a.length-1)),a}return""},l=function(){return o()+"/api/data/v"+a.webApiVersion+"/"};this.setConfig=function(e){e.webApiVersion&&(c.stringParameterCheck(e.webApiVersion,"DynamicsWebApi.setConfig","config.webApiVersion"),a.webApiVersion=e.webApiVersion),e.webApiUrl?(c.stringParameterCheck(e.webApiUrl,"DynamicsWebApi.setConfig","config.webApiUrl"),a.webApiUrl=e.webApiUrl):a.webApiUrl=l(),e.impersonate&&(a.impersonate=c.guidParameterCheck(e.impersonate,"DynamicsWebApi.setConfig","config.impersonate")),e.onTokenRefresh&&(c.callbackParameterCheck(e.onTokenRefresh,"DynamicsWebApi.setConfig","config.onTokenRefresh"),a.onTokenRefresh=e.onTokenRefresh),e.includeAnnotations&&(c.stringParameterCheck(e.includeAnnotations,"DynamicsWebApi.setConfig","config.includeAnnotations"),a.includeAnnotations=e.includeAnnotations),e.maxPageSize&&(c.numberParameterCheck(e.maxPageSize,"DynamicsWebApi.setConfig","config.maxPageSize"),a.maxPageSize=e.maxPageSize),e.returnRepresentation&&(c.boolParameterCheck(e.returnRepresentation,"DynamicsWebApi.setConfig","config.returnRepresentation"),a.returnRepresentation=e.returnRepresentation)},this.setConfig(e);var u=function(e,r,n,i,c,s){t(3)(e,r,a,n,i,c,s)};this.create=function(e,a,t,r,n){c.parameterCheck(e,"DynamicsWebApi.create","object"),c.stringParameterCheck(a,"DynamicsWebApi.create","collection"),c.callbackParameterCheck(t,"DynamicsWebApi.create","successCallback"),c.callbackParameterCheck(r,"DynamicsWebApi.create","errorCallback");var i=null;null!=n&&(c.stringParameterCheck(n,"DynamicsWebApi.create","prefer"),i={Prefer:n});var s=function(e){if(e.data)t(e.data);else{var a=e.headers["OData-EntityId"]?e.headers["OData-EntityId"]:e.headers["odata-entityid"];t(/[0-9A-F]{8}[-]?([0-9A-F]{4}[-]?){3}[0-9A-F]{12}/i.exec(a)[0])}};u("POST",a.toLowerCase(),e,i,s,r)},this.updateRequest=function(e,a,t){c.parameterCheck(e,"DynamicsWebApi.update","request"),c.parameterCheck(e.entity,"DynamicsWebApi.update","request.entity"),c.callbackParameterCheck(a,"DynamicsWebApi.update","successCallback"),c.callbackParameterCheck(t,"DynamicsWebApi.update","errorCallback");var r=i.convertRequest(e,"update");null==e.ifmatch&&(r.headers["If-Match"]="*");var n=function(e){a(e.data?e.data:!0)},s=e.ifmatch,o=function(e){s&&412==e.status?a(!1):t(e)};u("PATCH",r.url,e.entity,r.headers,n,o)},this.update=function(e,a,t,r,n,i,s){c.stringParameterCheck(e,"DynamicsWebApi.update","id"),e=c.guidParameterCheck(e,"DynamicsWebApi.update","id"),c.parameterCheck(t,"DynamicsWebApi.update","object"),c.stringParameterCheck(a,"DynamicsWebApi.update","collection"),c.callbackParameterCheck(r,"DynamicsWebApi.update","successCallback"),c.callbackParameterCheck(n,"DynamicsWebApi.update","errorCallback");var o={"If-Match":"*"};null!=i&&(c.stringParameterCheck(i,"DynamicsWebApi.update","prefer"),o.Prefer=i);var l="";null!=s&&(c.arrayParameterCheck(s,"DynamicsWebApi.update","select"),null!=s&&s.length>0&&(l="?$select="+s.join(",")));var p=function(e){e.data?r(e.data):r()};u("PATCH",a.toLowerCase()+"("+e+")"+l,t,o,p,n)},this.updateSingleProperty=function(e,a,t,r,n,i){c.stringParameterCheck(e,"DynamicsWebApi.updateSingleProperty","id"),e=c.guidParameterCheck(e,"DynamicsWebApi.updateSingleProperty","id"),c.parameterCheck(t,"DynamicsWebApi.updateSingleProperty","keyValuePair"),c.stringParameterCheck(a,"DynamicsWebApi.updateSingleProperty","collection"),c.callbackParameterCheck(r,"DynamicsWebApi.updateSingleProperty","successCallback"),c.callbackParameterCheck(n,"DynamicsWebApi.updateSingleProperty","errorCallback");var s=null;null!=i&&(c.stringParameterCheck(i,"DynamicsWebApi.updateSingleProperty","prefer"),s={Prefer:i});var o=function(e){e.data?r(e.data):r()},l=Object.keys(t)[0],p=t[l];u("PUT",a.toLowerCase()+"("+e+")/"+l,{value:p},s,o,n)},this.deleteRequest=function(e,a,t){c.parameterCheck(e,"DynamicsWebApi.delete","request"),c.callbackParameterCheck(a,"DynamicsWebApi.delete","successCallback"),c.callbackParameterCheck(t,"DynamicsWebApi.delete","errorCallback");var r=i.convertRequest(e,"delete"),n=function(){a(!0)},s=e.ifmatch,o=function(e){s&&412==e.status?a(!1):t(e)};u("DELETE",r.url,null,r.headers,n,o)},this.deleteRecord=function(e,a,t,r,n){c.stringParameterCheck(e,"DynamicsWebApi.delete","id"),e=c.guidParameterCheck(e,"DynamicsWebApi.delete","id"),c.stringParameterCheck(a,"DynamicsWebApi.delete","collection"),c.callbackParameterCheck(t,"DynamicsWebApi.delete","successCallback"),c.callbackParameterCheck(r,"DynamicsWebApi.delete","errorCallback"),null!=n&&c.stringParameterCheck(n,"DynamicsWebApi.delete","propertyName");var i=a.toLowerCase()+"("+e+")";null!=n&&(i+="/"+n),u("DELETE",i,null,null,function(e){t()},r)},this.retrieveRequest=function(e,a,t){c.parameterCheck(e,"DynamicsWebApi.retrieve","request"),c.callbackParameterCheck(a,"DynamicsWebApi.retrieve","successCallback"),c.callbackParameterCheck(t,"DynamicsWebApi.retrieve","errorCallback");var r=i.convertRequest(e,"retrieve"),s=e.select,o=function(e){a(null!=s&&1==s.length&&s[0].endsWith("/$ref")&&null!=e.data["@odata.id"]?n.convertToReferenceObject(e.data):e.data)};u("GET",r.url,null,r.headers,o,t)},this.retrieve=function(e,a,t,r,i,s){c.stringParameterCheck(e,"DynamicsWebApi.retrieve","id"),e=c.guidParameterCheck(e,"DynamicsWebApi.retrieve","id"),c.stringParameterCheck(a,"DynamicsWebApi.retrieve","collection"),c.callbackParameterCheck(t,"DynamicsWebApi.retrieve","successCallback"),c.callbackParameterCheck(r,"DynamicsWebApi.retrieve","errorCallback");var o=a.toLowerCase()+"("+e+")",l=[];null!=i&&i.length&&(c.arrayParameterCheck(i,"DynamicsWebApi.retrieve","select"),1==i.length&&i[0].endsWith("/$ref")&&i[0].endsWith("/$ref")?o+="/"+i[0]:(i[0].startsWith("/")&&(o+=i.shift()),i.length&&l.push("$select="+i.join(",")))),null!=s&&(c.stringParameterCheck(s,"DynamicsWebApi.retrieve","expand"),l.push("$expand="+s)),l.length&&(o+="?"+l.join("&")),u("GET",o,null,null,function(e){t(null!=i&&1==i.length&&i[0].endsWith("/$ref")&&null!=e.data["@odata.id"]?n.convertToReferenceObject(e.data):e.data)},r)},this.upsertRequest=function(e,a,t){c.parameterCheck(e,"DynamicsWebApi.upsert","request"),c.parameterCheck(e.entity,"DynamicsWebApi.upsert","request.entity"),c.callbackParameterCheck(a,"DynamicsWebApi.upsert","successCallback"),c.callbackParameterCheck(t,"DynamicsWebApi.upsert","errorCallback");var r=i.convertRequest(e,"upsert"),n=e.ifnonematch,s=e.ifmatch,o=function(e){if(e.headers["OData-EntityId"]||e.headers["odata-entityid"]){var t=e.headers["OData-EntityId"]?e.headers["OData-EntityId"]:e.headers["odata-entityid"];a(/[0-9A-F]{8}[-]?([0-9A-F]{4}[-]?){3}[0-9A-F]{12}/i.exec(t)[0])}else e.data?a(e.data):a()},l=function(e){n&&412==e.status?a():s&&404==e.status?a():t(e)};u("PATCH",r.url,e.entity,r.headers,o,l)},this.upsert=function(e,a,t,r,n,i,s){c.stringParameterCheck(e,"DynamicsWebApi.upsert","id"),e=c.guidParameterCheck(e,"DynamicsWebApi.upsert","id"),c.parameterCheck(t,"DynamicsWebApi.upsert","object"),c.stringParameterCheck(a,"DynamicsWebApi.upsert","collection"),c.callbackParameterCheck(r,"DynamicsWebApi.upsert","successCallback"),c.callbackParameterCheck(n,"DynamicsWebApi.upsert","errorCallback");var o={};null!=i&&(c.stringParameterCheck(i,"DynamicsWebApi.upsert","prefer"),o.Prefer=i);var l="";null!=s&&(c.arrayParameterCheck(s,"DynamicsWebApi.upsert","select"),null!=s&&s.length>0&&(l="?$select="+s.join(",")));var p=function(e){if(e.headers["OData-EntityId"]||e.headers["odata-entityid"]){var a=e.headers["OData-EntityId"]?e.headers["OData-EntityId"]:e.headers["odata-entityid"];r(/[0-9A-F]{8}[-]?([0-9A-F]{4}[-]?){3}[0-9A-F]{12}/i.exec(a)[0])}else e.data?r(e.data):r()};u("PATCH",a.toLowerCase()+"("+e+")"+l,t,o,p,n)},this.count=function(e,a,t,r){if(null!=r&&(null==r||r.length))return this.retrieveMultipleRequest({collection:e,filter:r,count:!0},function(e){a(e.oDataCount?e.oDataCount:0)},t);c.stringParameterCheck(e,"DynamicsWebApi.count","collection"),c.callbackParameterCheck(a,"DynamicsWebApi.count","successCallback"),c.callbackParameterCheck(t,"DynamicsWebApi.count","errorCallback");var n=function(e){a(e.data?parseInt(e.data):0)};u("GET",e.toLowerCase()+"/$count",null,null,n,t)},this.retrieveMultiple=function(e,a,t,r,n,i){return this.retrieveMultipleRequest({collection:e,select:r,filter:n},a,t,i)},this.retrieveMultipleRequest=function(e,t,r,n){c.callbackParameterCheck(t,"DynamicsWebApi.retrieveMultiple","successCallback"),c.callbackParameterCheck(r,"DynamicsWebApi.retrieveMultiple","errorCallback"),n&&!e.collection&&(e.collection="any");var s=i.convertRequest(e,"retrieveMultiple");n&&(c.stringParameterCheck(n,"DynamicsWebApi.retrieveMultiple","nextPageLink"),s.url=n.replace(a.webApiUrl,""));var o=e.count,l=function(e){null!=e.data["@odata.nextLink"]&&(e.data.oDataNextLink=e.data["@odata.nextLink"]),o&&(e.data.oDataCount=null!=e.data["@odata.count"]?parseInt(e.data["@odata.count"]):0),null!=e.data["@odata.context"]&&(e.data.oDataContext=e.data["@odata.context"]),t(e.data)};u("GET",s.url,null,s.headers,l,r)},this.executeFetchXml=function(e,a,t,r,i,s,o,l){c.stringParameterCheck(e,"DynamicsWebApi.executeFetchXml","collection"),c.stringParameterCheck(a,"DynamicsWebApi.executeFetchXml","fetchXml"),c.callbackParameterCheck(t,"DynamicsWebApi.executeFetchXml","successCallback"),c.callbackParameterCheck(r,"DynamicsWebApi.executeFetchXml","errorCallback"),null==s&&(s=1),c.numberParameterCheck(s,"DynamicsWebApi.executeFetchXml","pageNumber");var p='$1 page="'+s+'"';null!=o&&(c.stringParameterCheck(o,"DynamicsWebApi.executeFetchXml","pagingCookie"),p+=' paging-cookie="'+o+'"'),a=a.replace(/^(<fetch[\w\d\s'"=]+)/,p);var m={};null!=i&&(c.stringParameterCheck(i,"DynamicsWebApi.executeFetchXml","includeAnnotations"),m.Prefer='odata.include-annotations="'+i+'"'),null!=l&&(l=c.guidParameterCheck(l,"DynamicsWebApi.executeFetchXml","impersonateUserId"),header.MSCRMCallerID=l);var d=encodeURIComponent(a),h=function(e){null!=e.data["@Microsoft.Dynamics.CRM.fetchxmlpagingcookie"]&&(e.data.PagingInfo=n.getFetchXmlPagingCookie(e.data["@Microsoft.Dynamics.CRM.fetchxmlpagingcookie"],s)),null!=e.data["@odata.context"]&&(e.data.oDataContext=e.data["@odata.context"]),t(e.data)};u("GET",e.toLowerCase()+"?fetchXml="+d,null,m,h,r)},this.associate=function(e,t,r,n,i,s,o,l){c.stringParameterCheck(e,"DynamicsWebApi.associate","primarycollection"),c.stringParameterCheck(n,"DynamicsWebApi.associate","relatedcollection"),c.stringParameterCheck(r,"DynamicsWebApi.associate","relationshipName"),t=c.guidParameterCheck(t,"DynamicsWebApi.associate","primaryId"),i=c.guidParameterCheck(i,"DynamicsWebApi.associate","relatedId"),c.callbackParameterCheck(s,"DynamicsWebApi.associate","successCallback"),c.callbackParameterCheck(o,"DynamicsWebApi.associate","errorCallback");var p=function(){s()},m={};null!=l&&(l=c.guidParameterCheck(l,"DynamicsWebApi.associate","impersonateUserId"),m.MSCRMCallerID=l),u("POST",e+"("+t+")/"+r+"/$ref",{"@odata.id":a.webApiUrl+n+"("+i+")"},m,p,o)},this.disassociate=function(e,a,t,r,n,i,s){c.stringParameterCheck(e,"DynamicsWebApi.disassociate","primarycollection"),c.stringParameterCheck(t,"DynamicsWebApi.disassociate","relationshipName"),a=c.guidParameterCheck(a,"DynamicsWebApi.disassociate","primaryId"),r=c.guidParameterCheck(r,"DynamicsWebApi.disassociate","relatedId"),c.callbackParameterCheck(n,"DynamicsWebApi.disassociate","successCallback"),c.callbackParameterCheck(i,"DynamicsWebApi.disassociate","errorCallback");var o=function(){n()},l={};null!=s&&(s=c.guidParameterCheck(s,"DynamicsWebApi.associate","impersonateUserId"),l.MSCRMCallerID=s),u("DELETE",e+"("+a+")/"+t+"("+r+")/$ref",null,l,o,i)},this.associateSingleValued=function(e,t,r,n,i,s,o,l){c.stringParameterCheck(e,"DynamicsWebApi.associateSingleValued","collection"),t=c.guidParameterCheck(t,"DynamicsWebApi.associateSingleValued","id"),i=c.guidParameterCheck(i,"DynamicsWebApi.associateSingleValued","relatedId"),c.stringParameterCheck(r,"DynamicsWebApi.associateSingleValued","singleValuedNavigationPropertyName"),c.stringParameterCheck(n,"DynamicsWebApi.associateSingleValued","relatedcollection"),c.callbackParameterCheck(s,"DynamicsWebApi.associateSingleValued","successCallback"),c.callbackParameterCheck(o,"DynamicsWebApi.associateSingleValued","errorCallback");var p=function(){s()},m={};null!=l&&(l=c.guidParameterCheck(l,"DynamicsWebApi.associate","impersonateUserId"),m.MSCRMCallerID=l),u("PUT",e+"("+t+")/"+r+"/$ref",{"@odata.id":a.webApiUrl+n+"("+i+")"},m,p,o)},this.disassociateSingleValued=function(e,a,t,r,n,i){c.stringParameterCheck(e,"DynamicsWebApi.disassociateSingleValued","collection"),a=c.guidParameterCheck(a,"DynamicsWebApi.disassociateSingleValued","id"),c.stringParameterCheck(t,"DynamicsWebApi.disassociateSingleValued","singleValuedNavigationPropertyName"),c.callbackParameterCheck(r,"DynamicsWebApi.disassociateSingleValued","successCallback"),c.callbackParameterCheck(n,"DynamicsWebApi.disassociateSingleValued","errorCallback");var s={};null!=i&&(i=c.guidParameterCheck(i,"DynamicsWebApi.associate","impersonateUserId"),s.MSCRMCallerID=i),u("DELETE",e+"("+a+")/"+t+"/$ref",null,s,function(){r()},n)},this.executeUnboundFunction=function(e,a,t,r,n){return p(e,r,null,null,a,t,n)},this.executeBoundFunction=function(e,a,t,r,n,i,c){return p(t,i,a,e,r,n,c)};var p=function(e,a,t,r,i,s,o){c.stringParameterCheck(e,"DynamicsWebApi.executeFunction","functionName"),c.callbackParameterCheck(i,"DynamicsWebApi.executeFunction","successCallback"),c.callbackParameterCheck(s,"DynamicsWebApi.executeFunction","errorCallback");var l=e+n.buildFunctionParameters(a);null!=t&&(c.stringParameterCheck(t,"DynamicsWebApi.executeFunction","collection"),r=c.guidParameterCheck(r,"DynamicsWebApi.executeFunction","id"),l=t+"("+r+")/"+l);var p={};null!=o&&(p.MSCRMCallerID=c.guidParameterCheck(o,"DynamicsWebApi.associate","impersonateUserId")),u("GET",l,null,p,function(e){e.data?i(e.data):i()},s)};this.executeUnboundAction=function(e,a,t,r,n){return m(e,a,null,null,t,r,n)},this.executeBoundAction=function(e,a,t,r,n,i,c){return m(t,r,a,e,n,i,c)};var m=function(e,a,t,r,n,i,s){c.stringParameterCheck(e,"DynamicsWebApi.executeAction","actionName"),c.callbackParameterCheck(n,"DynamicsWebApi.executeAction","successCallback"),c.callbackParameterCheck(i,"DynamicsWebApi.executeAction","errorCallback");var o=e;null!=t&&(c.stringParameterCheck(t,"DynamicsWebApi.executeAction","collection"),r=c.guidParameterCheck(r,"DynamicsWebApi.executeAction","id"),o=t+"("+r+")/"+o);var l={};null!=s&&(s=c.guidParameterCheck(s,"DynamicsWebApi.associate","impersonateUserId"),l.MSCRMCallerID=s),u("POST",o,a,l,function(e){e.data?n(e.data):n()},i)};this.initializeInstance=function(e){return e||(e=a),new r(e)}}var n=(t(0),t(5)),i=t(4),c=t(1);String.prototype.endsWith&&String.prototype.startsWith||t(2),e.exports=r}])});